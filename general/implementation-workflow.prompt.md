# 実装フロー & Git ワークフロープロンプト

## 実装フロー

**IMPORTANT: コードを変更する前に、必ず実装計画を先に提示すること**

- 実装タスクを受けた際は、コードを変更せずに、まず実装計画を提示する
- 計画には以下を含める：
  - タスクの理解と分析
  - 実装すべき機能・コンポーネントの概要
  - ファイル構成と変更対象
  - 実装手順とステップ
- ユーザーが計画に同意した後に実装を開始する

### 開発手法

**IMPORTANT: 基本的に TDD（テスト駆動開発）で開発すること**

- 実装は原則として TDD（Test-Driven Development）で行う
- Red → Green → Refactor のサイクルを守る
- 先にテストを書いてから実装コードを書く
- TDD 関連のプロンプト（`tdd.prompt.md`、`t-wada-tdd.prompt.md`）を参照して TDD のベストプラクティスに従う

### 実装時のルール取得

**IMPORTANT: 実装開始前に MCP のプロンプトツールで関連ルールを取得すること**

- 実装を開始する前に、以下の MCP ツールを使用して実装に必要なルールやガイドラインを取得する：

#### 利用可能な MCP ツール

1. **`search_prompts`**: キーワードで関連プロンプトを検索

   - 検索キーワード例：`react component`, `custom hook`, `testing`, `typescript`, `vitest`, `storybook`, `tdd`, `refactoring`, `commit`

2. **`auto_get_prompt`**: タスクと技術スタックから自動的に最適なプロンプトを取得

   - タスク内容と使用技術を指定するだけで関連ルールを自動取得

3. **`get_relevant_prompts`**: 現在のコンテキストに基づいて関連プロンプトを取得

   - 作業内容や技術スタック、問題点を説明して関連ルールを取得

4. **`list_prompts`**: 利用可能なプロンプト一覧を確認

#### 推奨する使用順序

1. `auto_get_prompt`でタスクに最適なプロンプトを自動取得
2. 必要に応じて`search_prompts`で追加のルールを検索
3. 取得したルールに従って実装を進める

### コード変更後の品質チェック

**IMPORTANT: コード変更後は必ず以下の品質チェックを実行すること**

コードを変更した後は、以下のチェックを**必ず**実行して品質を確保する：

1. **テストの実行**: 全てのテストが通ることを確認

   ```
   npm test
   # または
   npm run test
   ```

2. **Lint チェック**: コーディング規約に違反していないことを確認

   ```
   npm run lint
   # または
   npx eslint .
   ```

3. **型チェック**: TypeScript の型エラーがないことを確認
   ```
   npm run type-check
   # または
   npx tsc --noEmit
   ```

**⚠️ 重要な注意事項：**

- **これらのチェックが全て通るまでコミットしない**
- **エラーが発生した場合は修正してから次のステップに進む**
- **CI/CD での失敗を防ぐため、ローカルで必ず確認する**

## Git ワークフロー

**🔴 作業開始時に必ず新しいブランチを作成すること 🔴**

**以下の手順を必ず実行してください：**

1. **現在のブランチを確認**: `git branch`
2. **main ブランチにいる場合は即座に新しいブランチを作成**:
   ```
   git checkout -b feature/タスク名
   ```
3. **ブランチが作成されたことを確認**: `git branch`
4. **新しいブランチで作業開始**

**⚠️ 注意事項：**

- **main ブランチで直接作業することは絶対に禁止**
- **コード変更前に必ずブランチ作成を確認**
- **ブランチ名は内容を表す分かりやすい名前にする**

### その他のワークフロー

- ユーザーの指示があった場合に、GitHub の MCP を利用して、PR を作成する
- PR のタイトルはコミットルールの 1 行目の形式に従う
- 日本語でタイトルと説明を書く

### コミットルールの確認

**IMPORTANT: コミット前に必ず commit.prompt.md のルールを確認すること**

- コミットを作成する前に、MCP ツールの `get_prompt` を使用して `commit.prompt.md` を取得する
- 取得したコミットルールに従ってコミットメッセージを作成する
- 適切なコミットの形式とメッセージの構造を遵守する

### ブランチ命名規則

- feature/機能名: 新機能追加
- fix/修正内容: バグ修正
- refactor/対象: リファクタリング
- docs/対象: ドキュメント更新
