# マジックナンバー・マジックストリング コードレビュー プロンプト

## レビュー観点

### マジックナンバー
- 意味不明な数値リテラル
- 閾値、制限値、タイムアウト値
- 配列インデックスの直接指定
- 計算式内の定数
- リトライ回数、ポーリング間隔

### マジックストリング
- ハードコーディングされたメッセージ
- ステータス、タイプを表す文字列
- URLやパスの直書き
- エラーコード、イベント名
- 設定キー、属性名

### 許容される例外
- 0, 1, -1（明らかに自明な場合）
- 単位変換（例: `ms / 1000` で秒に変換）
- 標準的な値（HTTPステータスコード等）
- テストコード内のダミーデータ

## チェック優先度

### 高: 必ず定数化すべき
- ビジネスロジックの数値
- 環境依存の値
- 複数箇所で使用される値
- 変更可能性のある値

### 中: 定数化推奨
- 単一箇所でも意味が不明瞭な値
- デバッグ時に調整する可能性のある値

### 低: 許容可能
- 自明な値
- 標準仕様の値

## 出力形式

```markdown
## マジックナンバー・文字列 検出結果

### 🔴 高優先度
**該当箇所**: [ファイル:行番号]
```typescript
// 現在
if (items.length > 100) { ... }

// 推奨
const MAX_ITEMS_PER_PAGE = 100;
if (items.length > MAX_ITEMS_PER_PAGE) { ... }
```
**理由**: ビジネスロジックの制限値は定数化必須

### 🟡 中優先度
**該当箇所**: [ファイル:行番号]
```typescript
// 現在
return status === "active";

// 推奨
const STATUS = {
  ACTIVE: "active",
  INACTIVE: "inactive"
} as const;
return status === STATUS.ACTIVE;
```
**理由**: ステータス文字列はenum/定数オブジェクト化推奨

### 🟢 低優先度/許容
**該当箇所**: [ファイル:行番号]
```typescript
const firstItem = arr[0];  // 配列の先頭は自明
```
**理由**: 意味が明確で、定数化の必要性低

## サマリー
- 🔴 高優先度: [件数]件
- 🟡 中優先度: [件数]件  
- 🟢 許容可能: [件数]件

## 推奨アクション
1. 高優先度の項目を即座に定数化
2. 関連する値をグループ化（設定オブジェクト等）
3. 定数ファイルへの集約を検討
```

## 定数化の推奨パターン

```typescript
// 単一の定数
const MAX_RETRY_COUNT = 3;

// 関連する定数をグループ化
const API_CONFIG = {
  TIMEOUT_MS: 5000,
  MAX_RETRIES: 3,
  BASE_URL: "https://api.example.com"
} as const;

// Enumとして定義
enum HttpStatus {
  OK = 200,
  NOT_FOUND = 404
}

// Union型として定義
type Status = "active" | "inactive" | "pending";
```