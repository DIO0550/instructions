# ãƒ†ã‚¹ãƒˆæ§‹é€ ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

**Keywords**: test, testing, structure, nesting, flat, kent-c-dodds, avoid-nesting, file-separation

## ğŸ”´ æœ€é‡è¦åŸå‰‡ï¼šãƒ•ãƒ©ãƒƒãƒˆæ§‹é€  + ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²

**ğŸš¨ çµ¶å¯¾ãƒ«ãƒ¼ãƒ«**:

1. **ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ **ï¼š`describe`ã«ã‚ˆã‚‹ãƒã‚¹ãƒˆã¯åŸºæœ¬çš„ã«ä½¿ç”¨ã—ãªã„
2. **ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²**ï¼šæ©Ÿèƒ½ã”ã¨ã«ç‹¬ç«‹ã—ãŸãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
3. **è‡ªå·±å®Œçµãƒ†ã‚¹ãƒˆ**ï¼šå„ãƒ†ã‚¹ãƒˆã¯ç‹¬ç«‹ã—ã¦ç†è§£ã§ãã€ä»–ã®ãƒ†ã‚¹ãƒˆã«ä¾å­˜ã—ãªã„

ã“ã® 2 ã¤ã®çµ„ã¿åˆã‚ã›ãŒã€ä¿å®ˆæ€§ãƒ»å¯èª­æ€§ãƒ»å®Ÿè¡Œæ€§ã®é«˜ã„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’å®Ÿç¾ã™ã‚‹ã€‚

## âš¡ ãªãœãƒ•ãƒ©ãƒƒãƒˆæ§‹é€  + ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ãªã®ã‹

### ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ã®åˆ©ç‚¹

1. **èªçŸ¥è² è·ã®è»½æ¸›**ï¼šãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ«ã‚’è¿½è·¡ã™ã‚‹å¿…è¦ãŒãªã„
2. **ãƒ†ã‚¹ãƒˆã®ç‹¬ç«‹æ€§**ï¼šå„ãƒ†ã‚¹ãƒˆãŒè‡ªå·±å®Œçµã—ã¦ã„ã‚‹
3. **ãƒ‡ãƒãƒƒã‚°ã®å®¹æ˜“æ€§**ï¼šå¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®ç‰¹å®šãŒç¬æ™‚ã«ã§ãã‚‹
4. **ä¸¦åˆ—å®Ÿè¡Œã®æœ€é©åŒ–**ï¼šãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ãŒåŠ¹ç‡çš„ã«å‹•ä½œ

### ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã®åˆ©ç‚¹

1. **è²¬å‹™ã®æ˜ç¢ºåŒ–**ï¼š1 ãƒ•ã‚¡ã‚¤ãƒ«ï¼ 1 æ©Ÿèƒ½ã§è²¬å‹™ãŒæ˜ç¢º
2. **ä½œæ¥­åŠ¹ç‡ã®å‘ä¸Š**ï¼šé–¢é€£ã™ã‚‹ãƒ†ã‚¹ãƒˆã®ã¿ã«é›†ä¸­ã§ãã‚‹
3. **ä¸¦åˆ—å‡¦ç†ã®æœ€é©åŒ–**ï¼šãƒ•ã‚¡ã‚¤ãƒ«å˜ä½ã§ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½
4. **ã‚³ãƒ¼ãƒ‰é‡ã®é©æ­£åŒ–**ï¼š50-150 è¡Œç¨‹åº¦ã®ç®¡ç†ã—ã‚„ã™ã„ã‚µã‚¤ã‚º

### çµ„ã¿åˆã‚ã›ã®åŠ¹æœ

- **ğŸ¯ æœ€é«˜ã®é–‹ç™ºä½“é¨“**ï¼šå¿…è¦ãªæƒ…å ±ã ã‘ã«é›†ä¸­
- **ğŸš€ æœ€é€Ÿã®å®Ÿè¡Œé€Ÿåº¦**ï¼šä¸¦åˆ—å‡¦ç†ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæœ€é©åŒ–
- **ğŸ”§ æœ€é«˜ã®ä¿å®ˆæ€§**ï¼šå¤‰æ›´å½±éŸ¿ãŒå±€æ‰€çš„ã«ç•™ã¾ã‚‹

## ğŸ—ï¸ ç†æƒ³çš„ãªãƒ†ã‚¹ãƒˆæ§‹é€ ï¼ˆæ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

```
__tests__/
â”œâ”€â”€ user-login.test.js           # ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ï¼ˆãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ï¼‰
â”œâ”€â”€ user-registration.test.js    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ï¼ˆãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ï¼‰
â”œâ”€â”€ user-profile.test.js         # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†ï¼ˆãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ï¼‰
â”œâ”€â”€ password-reset.test.js       # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆï¼ˆãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ï¼‰
â”œâ”€â”€ email-verification.test.js   # ãƒ¡ãƒ¼ãƒ«èªè¨¼ï¼ˆãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ï¼‰
â””â”€â”€ helpers/
    â””â”€â”€ user-test-utils.js       # å…±é€šãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
```

### å„ãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ ä¾‹

```javascript
// user-login.test.js - å®Œå…¨ã«ãƒ•ãƒ©ãƒƒãƒˆã€describeãªã—
test("æœ‰åŠ¹ãªèªè¨¼æƒ…å ±ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¿”ã•ã‚Œã‚‹", () => {
  const credentials = { email: "test@example.com", password: "validPassword" };
  const result = login(credentials);
  expect(result.token).toBeDefined();
  expect(result.user.email).toBe("test@example.com");
});

test("ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ValidationErrorãŒç™ºç”Ÿã™ã‚‹", () => {
  const credentials = { email: "invalid-email", password: "validPassword" };
  expect(() => login(credentials)).toThrow(ValidationError);
});

test("ç©ºã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ValidationErrorãŒç™ºç”Ÿã™ã‚‹", () => {
  const credentials = { email: "test@example.com", password: "" };
  expect(() => login(credentials)).toThrow(ValidationError);
});

test("å­˜åœ¨ã—ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨AuthenticationErrorãŒç™ºç”Ÿã™ã‚‹", () => {
  const credentials = {
    email: "nonexistent@example.com",
    password: "password",
  };
  expect(() => login(credentials)).toThrow(AuthenticationError);
});
```

## âŒ çµ¶å¯¾ã«é¿ã‘ã‚‹ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ‘ã‚¿ãƒ¼ãƒ³ 1: describe ã«ã‚ˆã‚‹æ§‹é€ åŒ–

```javascript
// âŒ describeã‚’ä½¿ã£ãŸæ§‹é€ åŒ–ï¼ˆé¿ã‘ã‚‹ã¹ãï¼‰
describe("ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†", () => {
  describe("ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½", () => {
    describe("æ­£å¸¸ç³»", () => {
      test("ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã™ã‚‹", () => {});
    });
    describe("ç•°å¸¸ç³»", () => {
      test("ãƒ­ã‚°ã‚¤ãƒ³ãŒå¤±æ•—ã™ã‚‹", () => {});
    });
  });

  describe("ç™»éŒ²æ©Ÿèƒ½", () => {
    describe("æ­£å¸¸ç³»", () => {
      test("ç™»éŒ²ãŒæˆåŠŸã™ã‚‹", () => {});
    });
  });
});
```

**å•é¡Œç‚¹**:

- ãƒã‚¹ãƒˆãŒæ·±ãã€èªçŸ¥è² è·ãŒé«˜ã„
- ãƒ†ã‚¹ãƒˆåãŒä¸æ˜ç¢ºï¼ˆã©ã‚“ãªæ¡ä»¶ã§ä½•ãŒèµ·ãã‚‹ã‹ãŒåˆ†ã‹ã‚‰ãªã„ï¼‰
- beforeEach ã«ã‚ˆã‚‹çŠ¶æ…‹å…±æœ‰ã®æ¸©åºŠã«ãªã‚Šã‚„ã™ã„
- 1 ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå·¨å¤§ã«ãªã‚‹

### ãƒ‘ã‚¿ãƒ¼ãƒ³ 2: å·¨å¤§ãªå˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«

```javascript
// âŒ 1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«å…¨æ©Ÿèƒ½ï¼ˆé¿ã‘ã‚‹ã¹ãï¼‰
// user-management.test.js (500è¡Œ)
describe("ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ", () => {
  // ãƒ­ã‚°ã‚¤ãƒ³é–¢é€£ã®ãƒ†ã‚¹ãƒˆ 100è¡Œ
  // ç™»éŒ²é–¢é€£ã®ãƒ†ã‚¹ãƒˆ 150è¡Œ
  // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é–¢é€£ã®ãƒ†ã‚¹ãƒˆ 100è¡Œ
  // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆé–¢é€£ã®ãƒ†ã‚¹ãƒˆ 100è¡Œ
  // ãã®ä»– 50è¡Œ
});
```

**å•é¡Œç‚¹**:

- ãƒ•ã‚¡ã‚¤ãƒ«ãŒå·¨å¤§ã§ç®¡ç†å›°é›£
- è¤‡æ•°ã®æ©Ÿèƒ½ãŒæ··åœ¨
- ä¸¦åˆ—å®Ÿè¡Œã®åŠ¹ç‡ãŒæ‚ªã„
- å¤‰æ›´æ™‚ã®å½±éŸ¿ç¯„å›²ãŒå¤§ãã„

## âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è©³ç´°

### 1. ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã®åŸºæº–

```javascript
// âœ… æ©Ÿèƒ½åˆ¥åˆ†å‰²
user - login.test.js; // ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã®ã¿
user - registration.test.js; // ç™»éŒ²æ©Ÿèƒ½ã®ã¿
user - profile - update.test.js; // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°ã®ã¿
user - password - reset.test.js; // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆã®ã¿

// âœ… ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥åˆ†å‰²ï¼ˆReactï¼‰
LoginForm.test.js; // LoginFormã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿
RegistrationForm.test.js; // RegistrationFormã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿
UserProfile.test.js; // UserProfileã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿

// âœ… APIåˆ¥åˆ†å‰²
user - api.test.js; // ãƒ¦ãƒ¼ã‚¶ãƒ¼APIé–¢é€£
auth - api.test.js; // èªè¨¼APIé–¢é€£
profile - api.test.js; // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«APIé–¢é€£
```

### 2. ãƒ†ã‚¹ãƒˆåã®è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

```javascript
// âœ… å®Œå…¨ãªæƒ…å ±ã‚’å«ã‚€ãƒ†ã‚¹ãƒˆå
test("æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨æ­£ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¿”ã•ã‚Œã‚‹", () => {});
test("ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ValidationErrorãŒç™ºç”Ÿã™ã‚‹", () => {});
test("ç©ºã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹", () => {});
test("ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨AccountLockedErrorãŒç™ºç”Ÿã™ã‚‹", () => {});

// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ: [å…¥åŠ›æ¡ä»¶]ã§[å®Ÿè¡Œå†…å®¹]ã™ã‚‹ã¨[æœŸå¾…çµæœ]
// - å…¥åŠ›æ¡ä»¶: ã©ã®ã‚ˆã†ãªçŠ¶æ³ãƒ»ãƒ‡ãƒ¼ã‚¿ã§
// - å®Ÿè¡Œå†…å®¹: ä½•ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã¨
// - æœŸå¾…çµæœ: ã©ã®ã‚ˆã†ãªçµæœã«ãªã‚‹ã‹
```

### 3. ãƒ†ã‚¹ãƒˆã®ç‹¬ç«‹æ€§ã®ç¢ºä¿

```javascript
// âœ… å„ãƒ†ã‚¹ãƒˆã§ç‹¬ç«‹ã—ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
test("æœ‰åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹ã¨æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŒè¿”ã•ã‚Œã‚‹", () => {
  // ã“ã®ãƒ†ã‚¹ãƒˆå°‚ç”¨ã®ãƒ‡ãƒ¼ã‚¿æº–å‚™
  const userData = {
    email: "newuser@example.com",
    password: "securePassword123",
    name: "æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼",
  };

  // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
  const result = registerUser(userData);

  // ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
  expect(result.id).toBeDefined();
  expect(result.email).toBe(userData.email);
});

test("é‡è¤‡ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ç™»éŒ²ã™ã‚‹ã¨ConflictErrorãŒç™ºç”Ÿã™ã‚‹", () => {
  // ã“ã®ãƒ†ã‚¹ãƒˆå°‚ç”¨ã®ãƒ‡ãƒ¼ã‚¿æº–å‚™ï¼ˆå®Œå…¨ã«ç‹¬ç«‹ï¼‰
  const existingEmail = "existing@example.com";
  createExistingUser({ email: existingEmail });

  const duplicateUserData = {
    email: existingEmail,
    password: "password123",
    name: "é‡è¤‡ãƒ¦ãƒ¼ã‚¶ãƒ¼",
  };

  // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
  expect(() => registerUser(duplicateUserData)).toThrow(ConflictError);
});
```

## ğŸ¯ å®Ÿè£…æˆ¦ç•¥ï¼šæ®µéšçš„ç§»è¡Œ

### ãƒ•ã‚§ãƒ¼ã‚º 1: ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²

```javascript
// Before: å·¨å¤§ãªå˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«
user-management.test.js (500è¡Œ)

// After: æ©Ÿèƒ½åˆ¥åˆ†å‰²
user-login.test.js (60è¡Œ)
user-registration.test.js (80è¡Œ)
user-profile.test.js (70è¡Œ)
password-management.test.js (90è¡Œ)
```

### ãƒ•ã‚§ãƒ¼ã‚º 2: describe å‰Šé™¤ã¨ãƒ•ãƒ©ãƒƒãƒˆåŒ–

```javascript
// Before: ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§describeä½¿ç”¨
describe("ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½", () => {
  test("æˆåŠŸã™ã‚‹", () => {});
  test("å¤±æ•—ã™ã‚‹", () => {});
});

// After: å®Œå…¨ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ 
test("æœ‰åŠ¹ãªèªè¨¼æƒ…å ±ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¿”ã•ã‚Œã‚‹", () => {});
test("ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ValidationErrorãŒç™ºç”Ÿã™ã‚‹", () => {});
```

### ãƒ•ã‚§ãƒ¼ã‚º 3: ãƒ†ã‚¹ãƒˆç‹¬ç«‹æ€§ã®ç¢ºä¿

```javascript
// Before: beforeEachã«ã‚ˆã‚‹çŠ¶æ…‹å…±æœ‰
let user;
beforeEach(() => {
  user = createTestUser();
});

// After: å„ãƒ†ã‚¹ãƒˆã§ç‹¬ç«‹ã—ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
test("æœ‰åŠ¹ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°ã™ã‚‹ã¨æ›´æ–°å†…å®¹ãŒä¿å­˜ã•ã‚Œã‚‹", () => {
  const user = createTestUser(); // ã“ã®ãƒ†ã‚¹ãƒˆå°‚ç”¨
  // ãƒ†ã‚¹ãƒˆãƒ­ã‚¸ãƒƒã‚¯
});
```

## test vs it ã«ã¤ã„ã¦

- **test** ã¯ **it** ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã™
- **ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ã§ã¯ test ã‚’ä½¿ç”¨**ï¼šdescribe ãƒ–ãƒ­ãƒƒã‚¯å¤–ã§ã¯ `test` ã‚’æ¨å¥¨ï¼ˆåŸºæœ¬çš„ã«ã¯ã“ã¡ã‚‰ã‚’ä½¿ç”¨ï¼‰
- **ä¾‹å¤–çš„ã«ãƒã‚¹ãƒˆã—ãŸå ´åˆã¯ it ã‚’ä½¿ç”¨**ï¼šdescribe ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ã¯ `it` ã‚’ä½¿ç”¨ï¼ˆãŸã ã—ã€ãƒã‚¹ãƒˆè‡ªä½“ã‚’é¿ã‘ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ï¼‰
- **ä¸€è²«æ€§ã®ç¶­æŒ**ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§çµ±ä¸€ã—ãŸè¨˜è¿°æ–¹æ³•ã‚’æ¡ç”¨ã™ã‚‹ï¼ˆåŸºæœ¬ã¯`test`ã§çµ±ä¸€ï¼‰

## å®Ÿè·µçš„ãªå‘½åè¦å‰‡

**ãƒ†ã‚¹ãƒˆåã«å¿…è¦ãªæƒ…å ±ã‚’ã™ã¹ã¦å«ã‚ã‚‹**ã“ã¨ã§ã€describe ã®å¿…è¦æ€§ã‚’å®Œå…¨ã«æ’é™¤ã™ã‚‹ï¼š## âš ï¸ é‡è¦åŸå‰‡ï¼šåŸºæœ¬çš„ã« describe ã‚’ä½¿ç”¨ã—ãªã„

**ğŸ”´ æœ€ã‚‚é‡è¦ãªãƒ«ãƒ¼ãƒ«**: ãƒ†ã‚¹ãƒˆã¯åŸºæœ¬çš„ã«**ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ **ã§è¨˜è¿°ã—ã€`describe`ã«ã‚ˆã‚‹ãƒã‚¹ãƒˆã¯é¿ã‘ã‚‹ã€‚å„ãƒ†ã‚¹ãƒˆã¯ç‹¬ç«‹ã—ã¦ç†è§£ã§ãã€ãƒ†ã‚¹ãƒˆã®ç›®çš„ãŒåå‰ã‹ã‚‰å³åº§ã«æŠŠæ¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

## ãƒã‚¹ãƒˆã‚’é¿ã‘ãŸãƒ†ã‚¹ãƒˆè¨­è¨ˆ

Kent C. Dodds ã®ã€ŒAvoid nesting when you're testingã€ã®åŸå‰‡ã«åŸºã¥ãã€ä»¥ä¸‹ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«å¾“ã†ï¼š

### âŒ é¿ã‘ã‚‹ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆéåº¦ãªãƒã‚¹ãƒˆï¼‰

```javascript
describe("ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†", () => {
  describe("ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½", () => {
    describe("æ­£å¸¸ç³»", () => {
      describe("æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å ´åˆ", () => {
        test("ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã™ã‚‹", () => {
          // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
        });
      });
    });

    describe("ç•°å¸¸ç³»", () => {
      describe("ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å ´åˆ", () => {
        test("ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹", () => {
          // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
        });
      });
    });
  });
});
```

### âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆãƒ•ãƒ©ãƒƒãƒˆãªæ§‹é€ ï¼‰

```javascript
// login.test.js - describeã‚’ä½¿ã‚ãšã«ãƒ•ãƒ©ãƒƒãƒˆãªæ§‹é€ 
test("æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã™ã‚‹", () => {
  // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
});

test("ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹", () => {
  // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
});

test("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹å ´åˆã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¤±æ•—ã™ã‚‹", () => {
  // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
});
```

## describe ã‚’ä½¿ç”¨ã™ã¹ãå ´é¢ï¼ˆä¾‹å¤–çš„ãªã‚±ãƒ¼ã‚¹ï¼‰

> **é‡è¦**: ä»¥ä¸‹ã®å ´é¢ã§ã‚‚ã€ã¾ãšã¯ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ã§è§£æ±ºã§ããªã„ã‹ã‚’æ¤œè¨ã—ã€ã©ã†ã—ã¦ã‚‚å¿…è¦ãªå ´åˆã®ã¿ä½¿ç”¨ã™ã‚‹

- **é–¢é€£ã™ã‚‹ãƒ†ã‚¹ãƒˆã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–**ï¼šæ˜ç¢ºã«é–¢é€£æ€§ãŒã‚ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ç¾¤ã§ã€å€‹åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†å‰²ã™ã‚‹ã»ã©ã§ã‚‚ãªã„å ´åˆ
- **ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®å…±æœ‰**ï¼šbeforeEachã€beforeAll ãªã©ã§ã®ãƒ†ã‚¹ãƒˆç’°å¢ƒæº–å‚™ãŒè¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã§å¿…è¦ã§ã€é–¢æ•°ã«ã‚ˆã‚‹æŠ½è±¡åŒ–ã§ã¯å¯¾å¿œå›°é›£ãªå ´åˆ
- **ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®æ˜ç¢ºåŒ–**ï¼šç•°ãªã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„é–¢æ•°ã®ãƒ†ã‚¹ãƒˆã‚’ 1 ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§åˆ†é›¢ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆï¼ˆãŸã ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã‚’å„ªå…ˆæ¤œè¨ï¼‰

## describe ã‚’é¿ã‘ã‚‹ã¹ãå ´é¢ï¼ˆåŸºæœ¬æ–¹é‡ï¼‰

- **å˜ãªã‚‹åˆ†é¡ç›®çš„**ï¼šã€Œæ­£å¸¸ç³»ã€ã€Œç•°å¸¸ç³»ã€ãªã©ã®å˜ç´”ãªåˆ†é¡ï¼ˆãƒ†ã‚¹ãƒˆåã«å«ã‚ã‚‹ã¹ãï¼‰
- **1 ã¤ã—ã‹ãƒ†ã‚¹ãƒˆãŒãªã„å ´åˆ**ï¼šdescribe å†…ã«ãƒ†ã‚¹ãƒˆãŒ 1 ã¤ã—ã‹ãªã„
- **éåº¦ãªéšå±¤åŒ–**ï¼š3 ãƒ¬ãƒ™ãƒ«ä»¥ä¸Šã®æ·±ã„ãƒã‚¹ãƒˆæ§‹é€ 
- **ã‚³ãƒ¼ãƒ‰å†åˆ©ç”¨ç›®çš„**ï¼šbeforeEach ã§ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒä¸»ç›®çš„ï¼ˆé–¢æ•°ã«ã‚ˆã‚‹æŠ½è±¡åŒ–ã‚’ä½¿ç”¨ï¼‰

## ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ã®åˆ©ç‚¹

1. **å¯èª­æ€§ã®å‘ä¸Š**ï¼šãƒ†ã‚¹ãƒˆã®æ„å›³ãŒæ˜ç¢ºã«ãªã‚Šã€ãƒã‚¹ãƒˆã‚’è¿½è·¡ã™ã‚‹å¿…è¦ãŒãªã„
2. **ä¿å®ˆæ€§ã®å‘ä¸Š**ï¼šãƒ†ã‚¹ãƒˆã®è¿½åŠ ãƒ»ä¿®æ­£ãŒå®¹æ˜“ã«ãªã‚Šã€æ§‹é€ å¤‰æ›´ã®å½±éŸ¿ã‚’å—ã‘ã«ãã„
3. **å®Ÿè¡ŒåŠ¹ç‡**ï¼šãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ãŒåŠ¹ç‡çš„ã«å®Ÿè¡Œã§ãã€ä¸¦åˆ—å‡¦ç†ã«ã‚‚é©ã—ã¦ã„ã‚‹
4. **ã‚¨ãƒ©ãƒ¼ç‰¹å®šã®å®¹æ˜“æ€§**ï¼šå¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®å ´æ‰€ãŒç‰¹å®šã—ã‚„ã™ãã€ãƒ‡ãƒãƒƒã‚°ãŒç°¡å˜
5. **èªçŸ¥è² è·ã®è»½æ¸›**ï¼šãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ«ã‚’è¦šãˆã‚‹å¿…è¦ãŒãªãã€ãƒ†ã‚¹ãƒˆå†…å®¹ã«é›†ä¸­ã§ãã‚‹
6. **ãƒ†ã‚¹ãƒˆç‹¬ç«‹æ€§ã®å‘ä¸Š**ï¼šå„ãƒ†ã‚¹ãƒˆãŒè‡ªå·±å®Œçµã—ã€ä»–ã®ãƒ†ã‚¹ãƒˆã®å½±éŸ¿ã‚’å—ã‘ã«ãã„

## ğŸ¯ åŸºæœ¬æˆ¦ç•¥ï¼šãƒ†ã‚¹ãƒˆåˆ†å‰²ã‚’å„ªå…ˆã™ã‚‹

### ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰² > describe åˆ†å‰²

```javascript
// âœ… æœ€å„ªå…ˆï¼šæ©Ÿèƒ½ã”ã¨ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²
__tests__ / user - login.test.js; // ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆï¼ˆãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ï¼‰
user - registration.test.js; // ç™»éŒ²æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆï¼ˆãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ï¼‰
user - profile.test.js; // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆï¼ˆãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ï¼‰

// âŒ é¿ã‘ã‚‹ï¼š1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§describeã«ã‚ˆã‚‹åˆ†å‰²
__tests__ / user - management.test.js; // è¤‡æ•°æ©Ÿèƒ½ã‚’describeã§åˆ†å‰²
```

## test vs it ã«ã¤ã„ã¦

- **test** ã¯ **it** ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã™
- **ãƒ•ãƒ©ãƒƒãƒˆãªæ§‹é€ ã§ã¯ test ã‚’ä½¿ç”¨**ï¼šdescribe ãƒ–ãƒ­ãƒƒã‚¯å¤–ã§ã¯ `test` ã‚’æ¨å¥¨
- **ãƒã‚¹ãƒˆã•ã‚ŒãŸå ´åˆã¯ it ã‚’ä½¿ç”¨**ï¼šdescribe ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ã¯ `it` ã‚’ä½¿ç”¨ï¼ˆãŸã ã—ã€ãƒã‚¹ãƒˆè‡ªä½“ã‚’é¿ã‘ã‚‹ã“ã¨ã‚’æ¨å¥¨ï¼‰
- **ä¸€è²«æ€§ã®ç¶­æŒ**ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§çµ±ä¸€ã—ãŸè¨˜è¿°æ–¹æ³•ã‚’æ¡ç”¨ã™ã‚‹

## å®Ÿè·µçš„ãªå‘½åè¦å‰‡

ãƒ†ã‚¹ãƒˆåã«å¿…è¦ãªæƒ…å ±ã‚’å«ã‚ã‚‹ã“ã¨ã§ã€describe ã®å¿…è¦æ€§ã‚’æ¸›ã‚‰ã™ï¼š

````javascript
```javascript
// âœ… è‰¯ã„ä¾‹ï¼šãƒ†ã‚¹ãƒˆåã«ååˆ†ãªæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹ï¼ˆãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ã€describeãªã—ï¼‰
test("ç©ºã®é…åˆ—ã‚’æ¸¡ã—ãŸå ´åˆã¯ç©ºé…åˆ—ã‚’è¿”ã™", () => {});
test("æ•°å€¤ã®é…åˆ—ã‚’æ¸¡ã—ãŸå ´åˆã¯ã‚½ãƒ¼ãƒˆæ¸ˆã¿é…åˆ—ã‚’è¿”ã™", () => {});
test("æ–‡å­—åˆ—ã‚’å«ã‚€é…åˆ—ã‚’æ¸¡ã—ãŸå ´åˆã¯TypeErrorã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹", () => {});
test("nullã‚’æ¸¡ã—ãŸå ´åˆã¯TypeErrorã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹", () => {});
test("é‡è¤‡ã™ã‚‹æ•°å€¤ã‚’å«ã‚€é…åˆ—ã‚’ã‚½ãƒ¼ãƒˆã—ã¦é‡è¤‡ã‚’ä¿æŒã™ã‚‹", () => {});

// âŒ é¿ã‘ã‚‹ã¹ãä¾‹ï¼šdescribeã«ã‚ˆã‚‹æ§‹é€ åŒ–ï¼ˆæƒ…å ±ã‚‚ä¸è¶³ï¼‰
describe("sortNumbersé–¢æ•°", () => {
  describe("æ­£å¸¸ç³»", () => {
    test("ã‚½ãƒ¼ãƒˆã•ã‚ŒãŸé…åˆ—ã‚’è¿”ã™", () => {}); // ä½•ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹ã‹ãŒä¸æ˜
  });
  describe("ç•°å¸¸ç³»", () => {
    test("ã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹", () => {}); // ã©ã‚“ãªæ¡ä»¶ã§ã©ã‚“ãªã‚¨ãƒ©ãƒ¼ã‹ãŒä¸æ˜
  });
});

// âŒ ç‰¹ã«é¿ã‘ã‚‹ã¹ãï¼šéåº¦ãªãƒã‚¹ãƒˆ
describe("ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ", () => {
  describe("èªè¨¼æ©Ÿèƒ½", () => {
    describe("ãƒ­ã‚°ã‚¤ãƒ³", () => {
      describe("æ­£å¸¸ç³»", () => {
        test("æˆåŠŸã™ã‚‹", () => {}); // æƒ…å ±ãŒå…¨ãä¸è¶³
      });
    });
  });
});
````

### ãƒ†ã‚¹ãƒˆåã®æ§‹æˆè¦ç´ 

å„ªã‚ŒãŸãƒ†ã‚¹ãƒˆåã«ã¯ä»¥ä¸‹ã®è¦ç´ ã‚’å«ã‚ã‚‹ï¼š

1. **å…¥åŠ›æ¡ä»¶**ï¼šã€Œã©ã®ã‚ˆã†ãªçŠ¶æ³ã§ã€
2. **å®Ÿè¡Œå†…å®¹**ï¼šã€Œä½•ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€
3. **æœŸå¾…çµæœ**ï¼šã€Œã©ã†ãªã‚‹ã‹ã€

```javascript
// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼šã€Œ[å…¥åŠ›æ¡ä»¶]ã§[å®Ÿè¡Œå†…å®¹]ã™ã‚‹ã¨[æœŸå¾…çµæœ]ã€
test("æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹ã¨ç™»éŒ²æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹", () => {});
test("é‡è¤‡ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹ã¨ConflictErrorãŒç™ºç”Ÿã™ã‚‹", () => {});
test("ç©ºã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ValidationErrorãŒç™ºç”Ÿã™ã‚‹", () => {});
```

## ğŸ› ï¸ ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã«ã‚ˆã‚‹æŠ½è±¡åŒ–

### åŸºæœ¬åŸå‰‡: beforeEach ã‚ˆã‚Šé–¢æ•°ã‚’é¸ã¶

```javascript
// âŒ beforeEachã«ã‚ˆã‚‹çŠ¶æ…‹å…±æœ‰
describe("ãƒ¦ãƒ¼ã‚¶ãƒ¼æ©Ÿèƒ½", () => {
  let user, mockService;

  beforeEach(() => {
    user = createTestUser();
    mockService = jest.fn();
  });

  test("ãƒ†ã‚¹ãƒˆ1", () => {
    // userã¨mockServiceãŒã©ã“ã‹ã‚‰æ¥ã¦ã„ã‚‹ã‹è¿½è·¡ãŒå¿…è¦
  });
});

// âœ… ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã«ã‚ˆã‚‹æ˜ç¤ºçš„ãªæº–å‚™
function createLoginTestSetup() {
  return {
    validUser: { email: "test@example.com", password: "password123" },
    mockAuthService: jest.fn(),
    mockTokenStorage: jest.fn(),
  };
}

test("æœ‰åŠ¹ãªèªè¨¼æƒ…å ±ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã•ã‚Œã‚‹", () => {
  const { validUser, mockAuthService, mockTokenStorage } =
    createLoginTestSetup();
  mockAuthService.mockReturnValue({ token: "valid-token" });

  const result = login(validUser, mockAuthService, mockTokenStorage);

  expect(mockTokenStorage).toHaveBeenCalledWith("valid-token");
  expect(result.success).toBe(true);
});
```

### çµ„ã¿åˆã‚ã›å¯èƒ½ãªãƒ˜ãƒ«ãƒ‘ãƒ¼

```javascript
// helpers/user-test-utils.js
export function createValidUser(overrides = {}) {
  return {
    email: "test@example.com",
    password: "password123",
    name: "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼",
    ...overrides,
  };
}

export function createInvalidEmailUser() {
  return createValidUser({ email: "invalid-email" });
}

export function createEmptyPasswordUser() {
  return createValidUser({ password: "" });
}

export function setupAuthMocks() {
  return {
    authService: jest.fn(),
    tokenStorage: jest.fn(),
    userRepository: jest.fn(),
  };
}
```

```javascript
// user-login.test.js
import {
  createValidUser,
  createInvalidEmailUser,
  setupAuthMocks,
} from "./helpers/user-test-utils";

test("æœ‰åŠ¹ãªèªè¨¼æƒ…å ±ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨èªè¨¼ãŒæˆåŠŸã™ã‚‹", () => {
  const user = createValidUser();
  const { authService } = setupAuthMocks();
  authService.mockReturnValue({ success: true, token: "token123" });

  const result = login(user, authService);

  expect(result.success).toBe(true);
  expect(result.token).toBe("token123");
});

test("ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ValidationErrorãŒç™ºç”Ÿã™ã‚‹", () => {
  const user = createInvalidEmailUser();
  const { authService } = setupAuthMocks();

  expect(() => login(user, authService)).toThrow(ValidationError);
});
```

## ğŸ”¥ ä¾‹å¤–çš„ãª describe ä½¿ç”¨ã®åˆ¤å®šåŸºæº–

### ä½¿ç”¨å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

describe ã‚’ä½¿ç”¨ã™ã‚‹å‰ã«ã€**ã™ã¹ã¦**ã®é …ç›®ã‚’ç¢ºèªã™ã‚‹ï¼š

- [ ] **ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã§è§£æ±ºã§ããªã„ã‹ï¼Ÿ** (95%ã®å ´åˆã€ã“ã‚Œã§è§£æ±º)
- [ ] **ãƒ†ã‚¹ãƒˆåã®æ”¹å–„ã§è§£æ±ºã§ããªã„ã‹ï¼Ÿ**
- [ ] **ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã§è§£æ±ºã§ããªã„ã‹ï¼Ÿ**
- [ ] **æœ¬å½“ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ãŒå¿…è¦ã‹ï¼Ÿ**ï¼ˆå˜ãªã‚‹åˆ†é¡ã§ã¯ãªã„ã‹ï¼Ÿï¼‰
- [ ] **1 ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ç•™ã‚ã‚‹æ˜ç¢ºãªç†ç”±ãŒã‚ã‚‹ã‹ï¼Ÿ**

### ä¾‹å¤–çš„ã«ä½¿ç”¨ã—ã¦ã‚‚ã‚ˆã„å ´é¢

```javascript
// âœ… ä¾‹å¤–çš„ã«è¨±å¯ã•ã‚Œã‚‹å ´é¢ï¼šåŒä¸€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç•°ãªã‚‹propsãƒ‘ã‚¿ãƒ¼ãƒ³
// ComponentWithMultipleStates.test.js

describe("loadingçŠ¶æ…‹ã®å ´åˆ", () => {
  // setup for loading state tests
  beforeEach(() => {
    mockApiCall.mockImplementation(() => new Promise(() => {})); // never resolves
  });

  test("ã‚¹ãƒ”ãƒŠãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹", () => {});
  test("ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒéè¡¨ç¤ºã«ãªã‚‹", () => {});
});

describe("errorçŠ¶æ…‹ã®å ´åˆ", () => {
  beforeEach(() => {
    mockApiCall.mockRejectedValue(new Error("API Error"));
  });

  test("ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹", () => {});
  test("ãƒªãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹", () => {});
});

// ãŸã ã—ã€ã“ã®å ´åˆã§ã‚‚ä»¥ä¸‹ã®æ–¹ãŒæ¨å¥¨ã•ã‚Œã‚‹ï¼š
// ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²: ComponentLoading.test.js, ComponentError.test.js
```

## ğŸ’¡ ã¾ã¨ã‚ï¼šæˆåŠŸã¸ã®é“ç­‹

### ğŸ¯ çŸ­æœŸç›®æ¨™ï¼ˆ1-2 é€±é–“ï¼‰

1. **æ–°ã—ã„ãƒ†ã‚¹ãƒˆã¯ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ã®ã¿**
2. **100 è¡Œã‚’è¶…ãˆã‚‹ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²é–‹å§‹**
3. **describe ä½¿ç”¨å‰ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆå°å…¥**

### ğŸš€ ä¸­æœŸç›®æ¨™ï¼ˆ1-2 ãƒ¶æœˆï¼‰

1. **æ—¢å­˜ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å®Œå…¨åˆ†å‰²**
2. **å…¨ describe ãƒ–ãƒ­ãƒƒã‚¯ã®å‰Šé™¤**
3. **ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã¸ã®ç½®ãæ›ãˆå®Œäº†**

### ğŸ† é•·æœŸç›®æ¨™ï¼ˆç¶™ç¶šçš„ï¼‰

1. **æ–°è¦å‚ç”»è€…ã§ã‚‚å³åº§ã«ç†è§£ã§ãã‚‹ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ**
2. **ä¸¦åˆ—å®Ÿè¡Œã«ã‚ˆã‚‹é«˜é€Ÿãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**
3. **å¤‰æ›´æ™‚ã®å½±éŸ¿ãŒå±€æ‰€çš„ãªãƒ†ã‚¹ãƒˆè¨­è¨ˆ**

### æˆåŠŸæŒ‡æ¨™

```javascript
// Before: èªçŸ¥è² è·ãŒé«˜ã„æ§‹é€ 
describe("UserManagement", () => {
  // +1 ãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ«
  describe("Authentication", () => {
    // +1 ãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ«
    describe("Login", () => {
      // +1 ãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ«
      describe("Valid credentials", () => {
        // +1 ãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ« = è¨ˆ4ãƒ¬ãƒ™ãƒ«
        test("succeeds", () => {}); // ãƒ†ã‚¹ãƒˆåãŒä¸æ˜ç¢º
      });
    });
  });
});

// After: èªçŸ¥è² è·ãŒä½ã„æ§‹é€ 
test("æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¿”ã•ã‚Œã‚‹", () => {
  // 1è¡Œã§ãƒ†ã‚¹ãƒˆã®å†…å®¹ãŒå®Œå…¨ã«ç†è§£ã§ãã‚‹
  // ãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ« = 0
  // ãƒ•ã‚¡ã‚¤ãƒ«å: user-login.test.js (50è¡Œ)
});
```

**çµæœ**:

- èªçŸ¥è² è·: 4 ãƒ¬ãƒ™ãƒ« â†’ 0 ãƒ¬ãƒ™ãƒ«
- ãƒ†ã‚¹ãƒˆå†…å®¹ã®ç†è§£: 10 ç§’ â†’ 1 ç§’
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: 500 è¡Œ â†’ 50 è¡Œ
- ä¿å®ˆæ€§: ä½ â†’ é«˜
- å®Ÿè¡Œé€Ÿåº¦: é… â†’ é«˜é€Ÿ

ã“ã®æ§‹é€ ã«ã‚ˆã‚Šã€**æœ€é«˜ã®é–‹ç™ºä½“é¨“ã¨æœ€çŸ­ã®é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«**ã‚’å®Ÿç¾ã§ãã‚‹ã€‚

// âŒ é¿ã‘ã‚‹ã¹ãä¾‹ï¼šdescribe ã«ã‚ˆã‚‹æ§‹é€ åŒ–ï¼ˆæƒ…å ±ã‚‚ä¸è¶³ï¼‰
describe("sortNumbers é–¢æ•°", () => {
describe("æ­£å¸¸ç³»", () => {
test("ã‚½ãƒ¼ãƒˆã•ã‚ŒãŸé…åˆ—ã‚’è¿”ã™", () => {}); // ä½•ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹ã‹ãŒä¸æ˜
});
describe("ç•°å¸¸ç³»", () => {
test("ã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹", () => {}); // ã©ã‚“ãªæ¡ä»¶ã§ã©ã‚“ãªã‚¨ãƒ©ãƒ¼ã‹ãŒä¸æ˜
});
});

// âŒ ç‰¹ã«é¿ã‘ã‚‹ã¹ãï¼šéåº¦ãªãƒã‚¹ãƒˆ
describe("ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ", () => {
describe("èªè¨¼æ©Ÿèƒ½", () => {
describe("ãƒ­ã‚°ã‚¤ãƒ³", () => {
describe("æ­£å¸¸ç³»", () => {
test("æˆåŠŸã™ã‚‹", () => {}); // æƒ…å ±ãŒå…¨ãä¸è¶³
});
});
});
});

````

### ãƒ†ã‚¹ãƒˆåã®æ§‹æˆè¦ç´ 

å„ªã‚ŒãŸãƒ†ã‚¹ãƒˆåã«ã¯ä»¥ä¸‹ã®è¦ç´ ã‚’å«ã‚ã‚‹ï¼š

1. **å…¥åŠ›æ¡ä»¶**ï¼šã€Œã©ã®ã‚ˆã†ãªçŠ¶æ³ã§ã€
2. **å®Ÿè¡Œå†…å®¹**ï¼šã€Œä½•ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€
3. **æœŸå¾…çµæœ**ï¼šã€Œã©ã†ãªã‚‹ã‹ã€

```javascript
// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼šã€Œ[å…¥åŠ›æ¡ä»¶]ã§[å®Ÿè¡Œå†…å®¹]ã™ã‚‹ã¨[æœŸå¾…çµæœ]ã€
test("æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹ã¨ç™»éŒ²æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹", () => {});
test("é‡è¤‡ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹ã¨ConflictErrorãŒç™ºç”Ÿã™ã‚‹", () => {});
test("ç©ºã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ValidationErrorãŒç™ºç”Ÿã™ã‚‹", () => {});
````

## å¯å¤‰å¤‰æ•°ã®å•é¡Œã¨ãã®è§£æ±ºç­–

### âŒ å¯å¤‰å¤‰æ•°ã«ã‚ˆã‚‹å•é¡Œï¼ˆKent C. Dodds ã®è¨˜äº‹ã‚ˆã‚Šï¼‰

```javascript
describe("Login", () => {
  let utils,
    handleSubmit,
    user,
    changeUsernameInput,
    changePasswordInput,
    clickSubmit;

  beforeEach(() => {
    handleSubmit = jest.fn();
    user = { username: "michelle", password: "smith" };
    utils = render(<Login onSubmit={handleSubmit} />);
    changeUsernameInput = (value) =>
      userEvent.type(utils.getByLabelText(/username/i), value);
    changePasswordInput = (value) =>
      userEvent.type(utils.getByLabelText(/password/i), value);
    clickSubmit = () => userEvent.click(utils.getByText(/submit/i));
  });

  describe("when username and password is provided", () => {
    beforeEach(() => {
      changeUsernameInput(user.username);
      changePasswordInput(user.password);
    });

    describe("when the submit button is clicked", () => {
      beforeEach(() => {
        clickSubmit();
      });

      test("should call onSubmit with the username and password", () => {
        // handleSubmit ã¯ã©ã“ã‹ã‚‰æ¥ã¦ã„ã‚‹ï¼Ÿä½•åº¦ã‚‚å†ä»£å…¥ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ã¯ï¼Ÿ
        expect(handleSubmit).toHaveBeenCalledTimes(1);
        expect(handleSubmit).toHaveBeenCalledWith(user);
      });
    });
  });
});
```

**å•é¡Œç‚¹**ï¼š

- å¤‰æ•°ãŒã©ã“ã§å®šç¾©ãƒ»ä»£å…¥ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’è¿½è·¡ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- ãƒã‚¹ãƒˆã—ãŸ beforeEach ã§å€¤ãŒä¸Šæ›¸ãã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
- ãƒ†ã‚¹ãƒˆã‚’ç†è§£ã™ã‚‹ãŸã‚ã«é ­ã®ä¸­ã§çŠ¶æ…‹ã‚’è¿½è·¡ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

### âœ… ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã«ã‚ˆã‚‹è§£æ±º

```javascript
test("calls onSubmit with username and password when submit is clicked", () => {
  const handleSubmit = jest.fn();
  const { getByLabelText, getByText } = render(
    <Login onSubmit={handleSubmit} />
  );
  const user = { username: "michelle", password: "smith" };

  userEvent.type(getByLabelText(/username/i), user.username);
  userEvent.type(getByLabelText(/password/i), user.password);
  userEvent.click(getByText(/submit/i));

  expect(handleSubmit).toHaveBeenCalledTimes(1);
  expect(handleSubmit).toHaveBeenCalledWith(user);
});

test("shows error message when submit is clicked and no username is provided", () => {
  const handleSubmit = jest.fn();
  const { getByLabelText, getByText, getByRole } = render(
    <Login onSubmit={handleSubmit} />
  );

  userEvent.type(getByLabelText(/password/i), "anything");
  userEvent.click(getByText(/submit/i));

  const errorMessage = getByRole("alert");
  expect(errorMessage).toHaveTextContent(/username is required/i);
  expect(handleSubmit).not.toHaveBeenCalled();
});
```

**åˆ©ç‚¹**ï¼š

- ã™ã¹ã¦ã®å¤‰æ•°ãŒãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹
- ãƒ†ã‚¹ãƒˆå…¨ä½“ãŒè‡ªå·±å®Œçµã—ã¦ã„ã‚‹
- å¤‰æ•°ã®è¿½è·¡ãŒä¸è¦

## AHA åŸå‰‡ã®é©ç”¨ï¼ˆAvoid Hasty Abstractionsï¼‰

### åŸºæœ¬æ–¹é‡

> "é‡è¤‡ã‚’æã‚Œã‚‹ã‚ˆã‚Šã€é–“é•ã£ãŸæŠ½è±¡åŒ–ã‚’æã‚Œã‚ˆã€‚ã¾ãšå¤‰æ›´ã«æœ€é©åŒ–ã›ã‚ˆ"

### é–¢æ•°ã«ã‚ˆã‚‹é©åˆ‡ãªæŠ½è±¡åŒ–

é‡è¤‡ãŒå•é¡Œã«ãªã£ã¦ããŸå ´åˆã¯ã€beforeEach ã§ã¯ãªã**é–¢æ•°**ã‚’ä½¿ç”¨ã™ã‚‹ï¼š

```javascript
// âœ… é–¢æ•°ã«ã‚ˆã‚‹æŠ½è±¡åŒ–ï¼ˆå¿…è¦ã«ãªã£ã¦ã‹ã‚‰é©ç”¨ï¼‰
function setup() {
  const handleSubmit = jest.fn();
  const utils = render(<Login onSubmit={handleSubmit} />);
  const user = { username: "michelle", password: "smith" };
  const changeUsernameInput = (value) =>
    userEvent.type(utils.getByLabelText(/username/i), value);
  const changePasswordInput = (value) =>
    userEvent.type(utils.getByLabelText(/password/i), value);
  const clickSubmit = () => userEvent.click(utils.getByText(/submit/i));
  return {
    ...utils,
    handleSubmit,
    user,
    changeUsernameInput,
    changePasswordInput,
    clickSubmit,
  };
}

function setupSuccessCase() {
  const utils = setup();
  utils.changeUsernameInput(utils.user.username);
  utils.changePasswordInput(utils.user.password);
  utils.clickSubmit();
  return utils;
}

test("calls onSubmit with the username and password", () => {
  const { handleSubmit, user } = setupSuccessCase();
  expect(handleSubmit).toHaveBeenCalledTimes(1);
  expect(handleSubmit).toHaveBeenCalledWith(user);
});
```

### æŠ½è±¡åŒ–ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°

1. **æœ€åˆã¯é‡è¤‡ã‚’è¨±å®¹ã™ã‚‹**ï¼šå°ã•ãªãƒ†ã‚¹ãƒˆã§ã¯é‡è¤‡ã®æ–¹ãŒç†è§£ã—ã‚„ã™ã„
2. **å•é¡ŒãŒé¡•åœ¨åŒ–ã—ã¦ã‹ã‚‰æŠ½è±¡åŒ–ã™ã‚‹**ï¼šå®Ÿéš›ã«ä¿å®ˆæ€§ã®å•é¡ŒãŒå‡ºã¦ã‹ã‚‰
3. **é–¢æ•°ã«ã‚ˆã‚‹æŠ½è±¡åŒ–ã‚’å„ªå…ˆã™ã‚‹**ï¼šbeforeEach ã‚ˆã‚Šã‚‚ç´”ç²‹é–¢æ•°ã‚’ä½¿ç”¨
4. **åˆæˆå¯èƒ½ãªè¨­è¨ˆã«ã™ã‚‹**ï¼šå°ã•ãªé–¢æ•°ã‚’çµ„ã¿åˆã‚ã›ã¦å¤§ããªæ©Ÿèƒ½ã‚’å®Ÿç¾

## ğŸ—ï¸ ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰²æˆ¦ç•¥ï¼ˆæœ€é‡è¦ï¼‰

### ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã‚’æœ€å„ªå…ˆ - describe ã¯ä½¿ã‚ãªã„

```
âŒ çµ¶å¯¾ã«é¿ã‘ã‚‹ï¼š1ã¤ã®å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã§describeã«ã‚ˆã‚‹åˆ†å‰²
__tests__/
  user-management.test.js  // 500è¡Œã€è¤‡æ•°ã®describeãƒ–ãƒ­ãƒƒã‚¯
  â””â”€â”€ describe("login", ...)
  â””â”€â”€ describe("registration", ...)
  â””â”€â”€ describe("profile", ...)

âœ… å¼·ãæ¨å¥¨ï¼šæ©Ÿèƒ½ã”ã¨ã®ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ï¼ˆãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ï¼‰
__tests__/
  user-login.test.js       // 50è¡Œã€describeãªã—
  user-registration.test.js // 60è¡Œã€describeãªã—
  user-profile.test.js     // 40è¡Œã€describeãªã—
  helpers/
    user-test-utils.js     // å…±é€šã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
```

### åˆ†å‰²åŸºæº–

1. **æ©Ÿèƒ½å˜ä½**ï¼šãƒ­ã‚°ã‚¤ãƒ³ã€ç™»éŒ²ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°ãªã©
2. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½**ï¼šReact ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã”ã¨
3. **API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå˜ä½**ï¼šå„ API ã®è²¬å‹™ã”ã¨
4. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º**ï¼š100-150 è¡Œã‚’è¶…ãˆãŸã‚‰åˆ†å‰²ã‚’æ¤œè¨

### ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã®åˆ©ç‚¹

1. **è«–ç†çš„ãªã‚°ãƒ«ãƒ¼ãƒ—åŒ–**ï¼šé–¢é€£ã™ã‚‹æ©Ÿèƒ½ãŒæ˜ç¢ºã«åˆ†é›¢ã•ã‚Œã‚‹
2. **ç‹¬ç«‹ã—ãŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**ï¼šå„ãƒ•ã‚¡ã‚¤ãƒ«ã§å¿…è¦ãªæº–å‚™å‡¦ç†ã®ã¿è¨˜è¿°
3. **èªçŸ¥è² è·ã®è»½æ¸›**ï¼šä½œæ¥­å¯¾è±¡ã®æ©Ÿèƒ½ã«é›†ä¸­ã§ãã‚‹
4. **ä¸¦åˆ—å®Ÿè¡Œã®æœ€é©åŒ–**ï¼šãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒãƒ•ã‚¡ã‚¤ãƒ«å˜ä½ã§ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½
5. **describe ä¸è¦**ï¼šãƒ•ã‚¡ã‚¤ãƒ«åã§æ©Ÿèƒ½ãŒæ˜ç¢ºã«ãªã‚‹ãŸã‚ã€è¿½åŠ ã®æ§‹é€ åŒ–ãŒä¸è¦
6. **ä¿å®ˆæ€§å‘ä¸Š**ï¼šæ©Ÿèƒ½è¿½åŠ æ™‚ã«æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã ã‘ã§æ¸ˆã‚€

## âŒ describe ä½¿ç”¨ã®å…¸å‹çš„ãªè½ã¨ã—ç©´

### ãƒ‘ã‚¿ãƒ¼ãƒ³ 1ï¼šä¸å¿…è¦ãªåˆ†é¡

```javascript
// âŒ å˜ç´”ãªåˆ†é¡ã§describeã‚’ä½¿ç”¨ï¼ˆç„¡æ„å‘³ï¼‰
describe("æ­£å¸¸ç³»", () => {
  test("æœ‰åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãŒæˆåŠŸã™ã‚‹", () => {});
});
describe("ç•°å¸¸ç³»", () => {
  test("ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹", () => {});
});

// âœ… ãƒ†ã‚¹ãƒˆåã«æƒ…å ±ã‚’å«ã‚ã¦ãƒ•ãƒ©ãƒƒãƒˆåŒ–
test("æœ‰åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãŒæˆåŠŸã™ã‚‹", () => {});
test("ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹ã¨ValidationErrorãŒç™ºç”Ÿã™ã‚‹", () => {});
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³ 2ï¼šéåº¦ãªãƒã‚¹ãƒˆ

```javascript
// âŒ ãƒã‚¹ãƒˆãŒæ·±ã™ãã‚‹
describe("UserService", () => {
  describe("register method", () => {
    describe("when email is provided", () => {
      describe("and email is valid", () => {
        test("creates user successfully", () => {});
      });
    });
  });
});

// âœ… ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰² + ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ 
// user-service-register.test.js
test("æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹ã¨ç™»éŒ²æˆåŠŸã™ã‚‹", () => {});
test("ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã™ã‚‹ã¨ValidationErrorãŒç™ºç”Ÿã™ã‚‹", () => {});
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³ 3ï¼šbeforeEach ä¾å­˜

```javascript
// âŒ describe + beforeEachã«ã‚ˆã‚‹è¤‡é›‘ãªæ§‹é€ 
describe("ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½", () => {
  let mockUser;
  beforeEach(() => {
    mockUser = { email: "test@example.com", password: "password123" };
  });

  test("ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã™ã‚‹", () => {
    // mockUserãŒã©ã“ã‹ã‚‰æ¥ã¦ã„ã‚‹ã‹ã‚’è¿½è·¡ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
  });
});

// âœ… å„ãƒ†ã‚¹ãƒˆã§ç‹¬ç«‹ã—ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
test("æœ‰åŠ¹ãªèªè¨¼æƒ…å ±ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¿”ã•ã‚Œã‚‹", () => {
  const mockUser = { email: "test@example.com", password: "password123" };
  // ãƒ†ã‚¹ãƒˆå†…ã§ã™ã¹ã¦å®Œçµ
});
```

## ğŸ’¡ ã¾ã¨ã‚ï¼šåŸºæœ¬åŸå‰‡

### ğŸ”´ çµ¶å¯¾åŸå‰‡

1. **describe ã¯åŸºæœ¬çš„ã«ä½¿ç”¨ã—ãªã„**
2. **ãƒ†ã‚¹ãƒˆã¯ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ã§è¨˜è¿°ã™ã‚‹**
3. **æ©Ÿèƒ½ã”ã¨ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã™ã‚‹**
4. **ãƒ†ã‚¹ãƒˆåã«å¿…è¦ãªæƒ…å ±ã‚’ã™ã¹ã¦å«ã‚ã‚‹**

### ğŸŸ¡ ä¾‹å¤–çš„ãªå ´åˆã®åˆ¤æ–­åŸºæº–

describe ã‚’ä½¿ç”¨ã™ã‚‹å‰ã«ã€ä»¥ä¸‹ã‚’ã™ã¹ã¦æ¤œè¨ã—ãŸã‹ï¼Ÿ

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã§è§£æ±ºã§ããªã„ã‹ï¼Ÿ
- [ ] é–¢æ•°ã«ã‚ˆã‚‹æŠ½è±¡åŒ–ã§è§£æ±ºã§ããªã„ã‹ï¼Ÿ
- [ ] ãƒ†ã‚¹ãƒˆåã®æ”¹å–„ã§è§£æ±ºã§ããªã„ã‹ï¼Ÿ
- [ ] æœ¬å½“ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ãŒå¿…è¦ã‹ï¼Ÿ

### âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³

- **å°ã•ãªãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**ï¼ˆ50-150 è¡Œç¨‹åº¦ï¼‰
- **æ˜ç¢ºãªãƒ†ã‚¹ãƒˆå**ï¼ˆæ¡ä»¶ + å‹•ä½œ + çµæœï¼‰
- **ç‹¬ç«‹ã—ãŸãƒ†ã‚¹ãƒˆ**ï¼ˆä»–ã®ãƒ†ã‚¹ãƒˆã«ä¾å­˜ã—ãªã„ï¼‰
- **é–¢æ•°ã«ã‚ˆã‚‹æŠ½è±¡åŒ–**ï¼ˆbeforeEach ã®ä»£ã‚ã‚Šï¼‰

### afterEach ã‚’ä½¿ç”¨ã™ã¹ãå ´é¢

```javascript
// âœ… ã‚°ãƒ­ãƒ¼ãƒãƒ«ç’°å¢ƒã®å¤‰æ›´ãŒå¿…è¦ãªå ´åˆ
afterEach(() => {
  cleanup(); // React Testing Library ã®DOM ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
});

// âœ… ãƒ†ã‚¹ãƒˆå¤±æ•—æ™‚ã«ã‚‚å®Ÿè¡ŒãŒå¿…è¦ãªå‡¦ç†
let server;
beforeAll(async () => {
  server = await startServer();
});
afterAll(() => server.close());

// âœ… console.error ã®ãƒ¢ãƒƒã‚¯åŒ–
beforeAll(() => {
  jest.spyOn(console, "error").mockImplementation(() => {});
});
afterEach(() => {
  console.error.mockClear();
});
afterAll(() => {
  console.error.mockRestore();
});
```

### é¿ã‘ã‚‹ã¹ãä½¿ç”¨æ–¹æ³•

```javascript
// âŒ å˜ãªã‚‹ã‚³ãƒ¼ãƒ‰å†åˆ©ç”¨ã®ãŸã‚ã®beforeEach
beforeEach(() => {
  handleSubmit = jest.fn(); // ã“ã‚Œã¯å„ãƒ†ã‚¹ãƒˆå†…ã§å®šç¾©ã™ã¹ã
  user = { username: "test", password: "test" };
});
```

```

```
